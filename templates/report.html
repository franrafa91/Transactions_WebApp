<html lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<style>
  body.modal-open {
    padding-right: 0 !important;
  }
  div.row {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }
  .container-sm{
    max-width:1200;
    margin:0 auto;/*make it centered*/
  }
  .container-lg{
      max-width:1600;
      margin:0 auto;/*make it centered*/
  }
  .modal-lg{
    max-width:900px
  }
  .offcanvas {
	background-color: #effff2;
  top: initial;
  bottom: initial;
}
</style>

<body>
    <div class='container-sm'>
      <div class="row justify-content-md-center">
      <h2>Filter Reports</h2>
      <form action=" {{ url_for('report') }}?secret={{secret}}" method="post" class="input group mb-3">
        <div class="form-group">
          <div class="row">
            <div class="col-md-3">
              <label for = "Cuenta">Cuenta:</label>
              <select name="Cuenta" id="Cuenta-search" class="form-control">
                <option selected value></option>
                <option value={{search[0]}} selected hidden>{{search[0]}}</option>
                {% for u in cuentas %}
                <option value="{{u[0]}}">{{u[0]}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for = "Transfer">Transfer:</label>
              <select name="Transfer" id="Transfer-search" class="form-control">
                <option selected value></option>
                <option value={{search[1]}} selected hidden>{{search[1]}}</option>
                {% for u in cuentas %}
                <option value="{{u[0]}}">{{u[0]}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for = "Payee">Payee:</label>
              <input type="text" name="Payee" id="Payee-search" placeholder="Payee" list="payeelist" class="form-control">
              <datalist id="payeelist">
                {% for u in payees %}
                <option value="{{u[0]}}">{{u[0]}}</option>
                {% endfor %}
              </datalist>
          </div>
            <div class="col-md-3">
              <label for = "Categoria">Categoría:</label>
              <input type="text" name="Categoria" id="Categoria-search" placeholder="Categoría" list="CatList" class="form-control">
              <datalist id="CatList">
                {% for u in categs %}
                <option value="{{u[0]}}">{{u[0]}}</option>
                {% endfor %}
              </datalist>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label for = "Fecha">Fecha Inicial:</label>
              <input type="datetime-local" name="Fecha Inicial" id="Fecha-inicial-search" value='{{search[4]}}' class="form-control">
            </div>
            <div class="col-md-3">
              <label for = "Fecha">Fecha Final:</label>
              <input type="datetime-local" name="Fecha Final" id="Fecha-final-search" value='{{search[5]}}' class="form-control">
            </div>
            <div class="col-md-3">
              <label for = "Monto">Monto:</label>
              <input type="number" min="-1000000" max="1000000" step="0.01" name="Monto" id="Monto-search" value="-0.00" class="form-control">
            </div>
            <div class="col-md-3">
              <label for = "Memo">Memo:</label>
              <input type="text" name="Memo" id="Memo-search" placeholder="Memo" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col-md-2">
              <label for = "Descripcion" class="col-form-label">Descripción:</label>
            </div>
            <div class="col-md-4">
              <input type="text" name="Descripcion" id="Descripcion-search" placeholder="Descripción" class="form-control">
            </div>                  
            <div class="col-md-2">
                <div class="d-grid">
                  <input type="submit" name="Operación" class="btn btn-primary" value="Buscar"/>
                </div>
              </div>
              <div class="col-md-2">
                <div class="d-grid">
                <input type="submit" name="Operación" class="btn btn-outline-secondary" value="Clear Search"/>
                </div>
              </div>
              <div class="col-md-2">
              <div class="d-grid">
                <input type="submit" name="Operación" class="btn btn-outline-secondary" value="Return"/>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  <!-- </div> -->
  </div>

  <div class="container-lg">
    <div class = "row">
    <div class="col">
      <div class = "table-responsive-lg">
      <table class="table table-striped table-hover" id="balance">
        <thead class="table-dark">
        <tr>
          <th>Cuenta</th>
          <th>Balance</th>
          <th>Balance EUR</th>
        </tr>
        </thead>
        <tbody>
        {% for u in balance %}
        <!-- <tr onclick="selectrow({{ u }})"> -->
        <tr>
          <td>{{ u.cuenta }}</td>
          <td class="text-right">{{ '{:,.2f}'.format(u.balance) }}</td>
          <td class="text-right">{{ '{:,.2f}'.format(u.balance_eur) }}</td>
        </tr>
        {% endfor %}
      </tbody>
      </table>
      </div>
    </div>
    <div class="col">
      <img src="{{ bal_img }}"/>
    </div>
    </div>
  </div>
  <!-- TABLE RESULTING BALANCE -->
  <div class="container-lg">
    <div class ="row">
    <div class="col">
      <div class = "table-responsive-lg">
      <table class="table table-striped table-hover" id="balance">
        <thead class="table-dark">
        <tr>
          <th>Categoría</th>
          <th>Monto</th>
        </tr>
        </thead>
        <tbody>
        {% for u in rep_categs %}
        <!-- <tr onclick="selectrow({{ u }})"> -->
        <tr>
          <td>{{ u.categoría }}</td>
          <td class="text-right">{{ '{:,.2f}'.format(u.monto_eur) }}</td>
        </tr>
        {% endfor %}
      </tbody>
      </table>
      </div>
    </div>
    <div class="col">
      <img src="{{ cat_img }}"/>
    </div>

    </div>

</div>
</body>
</html>